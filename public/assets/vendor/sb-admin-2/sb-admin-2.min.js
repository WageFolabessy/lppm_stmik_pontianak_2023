document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll("#sidebarToggle, #sidebarToggleTop").forEach(function (toggle) {
        toggle.addEventListener('click', function (e) {
            document.body.classList.toggle('sidebar-toggled');
            var sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('toggled');
            if (sidebar.classList.contains('toggled')) {
                sidebar.querySelectorAll('.collapse').forEach(function (collapse) {
                    collapse.classList.remove('show');
                });
            }
        });
    });

    window.addEventListener('resize', function (e) {
        if (window.innerWidth < 768) {
            document.querySelector('.sidebar .collapse').classList.remove('show');
        };

        if (window.innerWidth < 480 && !document.querySelector('.sidebar').classList.contains('toggled')) {
            document.body.classList.add('sidebar-toggled');
            document.querySelector('.sidebar').classList.add('toggled');
            document.querySelector('.sidebar .collapse').classList.remove('show');
        }
    });

    document.addEventListener('scroll', function (e) {
        this.scrollTop > 100 ? document.querySelector('.scroll-to-top').classList.add('show') : document.querySelector('.scroll-to-top').classList.remove('show');
    });

    document.querySelector('a.scroll-to-top').addEventListener('click', function (e) {
        e.preventDefault();
        var scrollToTop = window.setInterval(function () {
            var pos = window.pageYOffset;
            if (pos > 0) {
                window.scrollTo(0, pos - 20);
            } else {
                window.clearInterval(scrollToTop);
            }
        }, 16);
    });
});
